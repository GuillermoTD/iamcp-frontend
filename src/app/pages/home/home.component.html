<div class="home">
  @if (data?.data?.header) {
    <div class="home-header">
      <img
        id="header.logo"
        class="w-[144px]"
        [src]="serverUrl + data.data.header.logo.url"
      />

      @if (data.data.header.button.label) {
      <button id="header.button" class="home-header-button">
        {{ data.data.header.button.label }}
      </button>
      }
    </div>
  }

  @if (data?.data?.banner) {
  <div id="banner" class="home-banner">
    <img class="w-full" [src]="serverUrl + data.data.banner.image.url"/>

<!--
    <div
      class="absolute w-full left-1/2 top-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[229px] z-10"
    >
      <div class="flex flex-col items-center">
        @if (data?.data?.banner.logo) {
        <img
          id="banner.logo"
          class="w-[229px]"
          [src]="serverUrl + data.data.banner.logo.url"
        />
        }

        <div id="banner.header" class="text-[70px] font-bold">
          {{ data.data.banner.header }}
        </div>

        @if (data.data.banner.subheader) {
        <div id="banner.subheader" class="text-[35px]">
          {{ data.data.banner.subheader }}
        </div>
        }
      </div>
    </div>
    -->
  </div>
  }

<!-- <app-slider [slides]="data?.data?.slider?.slides"/> -->


  @if (data?.data?.tabs?.length) {
    <div class="home-tabs">
      <div class="home-tabs-labels">
        @for (tab of data.data.tabs; track tab.id) {
          <button [ngClass]="activeTabId === tab.id ? 'home-tabs-label-item-active-tab' : 'home-tabs-label-item'" (click)="setActiveTab(tab?.id)">
              {{ tab.title }}
          </button>
          }
    </div>

    <div class="home-tabs-content">
      @for (tab of data.data.tabs; track tab.id) {
        @if (this.activeTabId == tab.id) {
          @if (tab.blocks?.length) {
            <div class="home-tabs-content-blocks">
            @for (block of tab.blocks; track $index) {
              @switch (block.__component) {
                @case ("blocks.card") {
                  <div class="home-tabs-content-blocks-card" [ngClass]="block.isReverse ? 'flex-row-reverse' : 'flex-row'">
                    <div class="home-tabs-content-blocks-card-text">
                      <div class="home-tabs-content-blocks-card-title">
                        {{ block.title }}
                      </div>

                      <div class="home-tabs-content-blocks-card-description" [innerHTML]="block.description | markdown"></div>
                    </div>

                    <img class="home-tabs-content-blocks-card-image" [src]="serverUrl + block.image.url">
                  </div>
                }
                @case ("blocks.image") {
                  <div class="home-tabs-content-blocks-media">
                    <img [src]="serverUrl + block.image.url">

                    @if (block.hasDescription) {
                      <div class="home-tabs-content-blocks-media-description" [ngClass]="block.isDescriptionCentered ? 'text-center' : null">
                        {{ block.description }}
                      </div>
                    }
                  </div>
                }
                @case ("blocks.two-image-columns") {
                  <div class="home-tabs-content-blocks-two-image-columns">
                    @for (image of block.imageColumns; track image.id) {
                      <div class="home-tabs-content-blocks-media">
                        <div>
                          <img [src]="serverUrl + image.image.url">

                          @if (image.hasDescription) {
                            <div class="home-tabs-content-blocks-media-description" [ngClass]="image.isDescriptionCentered ? 'text-center' : ''">
                              {{ image.description }}
                            </div>
                          }
                        </div>
                      </div>
                    }
                  </div>
                }
                @case ("blocks.video") {
                  <div class="home-tabs-content-blocks-media">
                    <video [autoplay]="block.autoplay ? 'autoplay' : null" [muted]="block.isMuted ? 'muted' : null" [controls]="block.hasControls ? 'controls' : null">
                      <source [src]="serverUrl + block.video.url">
                    </video>

                    @if (block.hasDescription) {
                      <div class="home-tabs-content-blocks-media-description" [ngClass]="block.isDescriptionCentered ? 'text-center' : null">
                        {{ block.description }}
                      </div>
                    }
                  </div>
                }
                @case ("blocks.text") {
                  <div class="home-tabs-content-blocks-text" [ngClass]="block.isTextCentered ? 'text-center' : null">
                    <div class="home-tabs-content-blocks-text-title">
                      {{ block.title }}
                    </div>

                    <div class="home-tabs-content-blocks-text-description" [innerHTML]="block?.description | markdown"></div>
                  </div>
                }
                @case ("blocks.two-text-columns") {
                  <div class="home-tabs-content-blocks-two-text-columns">
                  @for (textBlock of block.textColumns; track textBlock.id) {
                    <div class="home-tabs-content-blocks-text" [ngClass]="block.isTextCentered ? 'text-center' : null">
                      <div class="home-tabs-content-blocks-text-title">
                        {{ textBlock.title }}
                      </div>
                      <div class="home-tabs-content-blocks-text-description"  [innerHTML]="textBlock?.description | markdown"></div>
                    </div>
                  }
                  </div>
                }
                @case ("blocks.timeline") {
                  <div class="home-tabs-content-blocks-timeline">
                    @for (textBlock of block.textBlocks; track textBlock.id) {
                      <div class="home-tabs-content-blocks-timeline-text ">

                        <div class="home-tabs-content-blocks-timeline-ball"></div>
                        @if (!$last) {
                          <div class="home-tabs-content-blocks-timeline-line"></div>
                        }

                        <div class="home-tabs-content-blocks-text">
                          <div class="home-tabs-content-blocks-text-title">
                            {{ textBlock.title }}
                          </div>
                          <div class="home-tabs-content-blocks-text-description" [innerHTML]="textBlock?.description | markdown"></div>
                        </div>
                      </div>
                    }
                  </div>
                }
              }
            }
            </div>
          }
        }
      }
    </div>
  </div>
  }

  @if (data?.data?.footer) {
    <div class="home-footer">
      <img class="w-[144px]" [src]="serverUrl + data.data.footer.logo.url"/>

      @if (data.data.footer.contactInfo.contacts.length) {
      <div class="home-footer-contact-info">
        @if (data.data.footer.contactInfo.title) {
          <div class="home-footer-contact-info-title">
            {{ data.data.footer.contactInfo.title }}
          </div>
          }

        <div class="home-footer-contact-info-contacts">
          @for (contact of data.data.footer.contactInfo.contacts; track
          contact.id) {
          <a [href]="contact.href" target="blank">
            <div class="home-footer-contact-info-contacts-contact">
              @if (contact.icon) {
                <img class="home-footer-contact-info-contacts-contact-icon" [src]="serverUrl +  contact.icon.url" />
              }

              <div class="home-footer-contact-info-contacts-contact-text">
                {{ contact.text }}
              </div>
            </div>
          </a>
          }
        </div>
        </div>
        }
    </div>
  }
</div>
